---
- name: check if i3 directory already exists
  stat: path=~/.config/i3
  register: i3dir_exists

- name: remove existing i3 directory and config
  file: path=~/.config/i3 state=absent
  when: i3dir_exists.stat.isdir is defined and i3dir_exists.stat.isdir

- name: link i3 directory
  file:
    src: "~/{{ configs_repo }}/{{ dotconfigdir }}/i3"
    dest: ~/.config/i3
    state: link
  when: repo is succeeded

- name: link i3status-rs config
  file:
    src: "~/{{ configs_repo }}/{{ dotconfigdir }}/i3status-rust"
    dest: ~/.config/i3status-rust
    state: link
  when: repo is succeeded

- name: link kitty config
  file:
    src: "~/{{ configs_repo }}/{{ dotconfigdir }}/kitty"
    dest: ~/.config/kitty
    state: link
  when: repo is succeeded

# Background picture
- name: create folder for background picture
  file:
    path: ~/Pictures/Space
    state: directory

- name: copy initial background picture
  copy:
    src: "~/{{ configs_repo }}/background_picture/IMAG7297.JPG"
    dest: "~/Pictures/Space/IMAG7297.JPG"

    # - name: Make sure to start redshift on startup

# gtd todo files
- name: link todo.sh config
  file:
    src: "~/{{ configs_repo }}/{{ dotconfigdir }}/todo"
    dest: ~/.config/todo
    state: link
  when: repo is succeeded

- name: Make sure gtd directory is present
  git:
    repo: "git@github.com:{{ git_username }}/{{ todotxtrepo }}.git"
    dest: "~/{{ todotxtrepo }}"
    update: no
  when: ssh is succeeded



# - name: link alacritty config
#   file:
#     src: "~/{{ configs_repo }}/{{ dotconfigdir }}/alacritty"
#     dest: ~/.config/alacritty
#     state: link
#   when: repo is succeeded
